# ABOUT Figure 3 - environmental abundances of genome bins
Copyright Jackson M. Tsuji, Neufeld Research Group, 2019
Part of the larger *IISD-ELA Chlorobia cyc2 project*.

## 1. Data collection
All dereplicated genome bins from the lake and enrichment culture metagenomes were used as input, along with the quality-controlled raw metagenomic reads generated by ATLAS (see Assembly and Binning ABOUT files). The genome bin collection is available in `04_extra_files` in this repository. HMMs used for screening the metagenomes are also available in `04_extra_files` in this repository.

## 2. Iterative read mapping
The script _____(___), version ___, was used.

Installation:
```

```

To run (assuming the bins are in folder `bins` and the unassembled reads are in folder `unassembled_reads`):
```

```
This outputs the read mapping file available in `04_extra_files` in this repository.

## 3. Phylogenetic classification of genome bins
GTDB-Tk was used.

Installation:
```

```

To run (assuming the bins are in folder `bins`):
```

```

This outputs separate classification files for bacteria and archaea available in `04_extra_files` in this repository.

## 4. Screening bins for key genes of interest
ORFs were predicted for all bins using prokka version ___:
```


```

Input HMMs (see Data Collection) were scanned against the prokka collection using MetAnnotate. To start the MetAnnotate Docker container:
```

```

To run:
```

```
This outputs a summary table available in `04_extra_files` in this repository.


## 5. Building the figure
All inputs files described above (as well as CheckM statistics, also available in `04_extra_files` in this repository) are combined in the below R code. You'll need to adjust the working directory to match whatever folder you work in. You'll also need to install all libraries loaded at the top of the script:
```

```

Minimal post-production editing was needed -- e.g., cleaning up labels, added phylum labels for added visual info (panel B), and adding panel labels.


